# å¤šç›®æ ‡æ•°æ®é€‰æ‹©ç­–ç•¥æŒ‡å—

## æ¦‚è¿°
åœ¨è®­ç»ƒå¤šä¸ªé¢„æµ‹ç›®æ ‡ï¼ˆæ³¢é•¿ã€PLQYã€å¯¿å‘½ï¼‰æ—¶ï¼Œç³»ç»Ÿæ”¯æŒä¸‰ç§æ•°æ®é€‰æ‹©ç­–ç•¥ï¼Œè§£å†³ä¸åŒç›®æ ‡ç¼ºå¤±å€¼åˆ†å¸ƒä¸ä¸€è‡´çš„é—®é¢˜ã€‚

## ä¸‰ç§ç­–ç•¥å¯¹æ¯”

| ç­–ç•¥ | è¯´æ˜ | æ•°æ®é‡ | é€‚ç”¨åœºæ™¯ |
|------|------|--------|----------|
| **intersection** | äº¤é›†æ¨¡å¼ï¼šåªä½¿ç”¨æ‰€æœ‰ç›®æ ‡éƒ½æœ‰å€¼çš„æ•°æ® | ~1354è¡Œ | éœ€è¦ç»Ÿä¸€çš„è®­ç»ƒæ•°æ®ï¼Œç¡®ä¿æ¨¡å‹ä¸€è‡´æ€§ |
| **independent** | ç‹¬ç«‹æ¨¡å¼ï¼šæ¯ä¸ªç›®æ ‡ç‹¬ç«‹ä½¿ç”¨å…¶æœ‰æ•ˆæ•°æ®ï¼ˆé»˜è®¤ï¼‰ | æ³¢é•¿~1666è¡Œ<br>PLQY~1562è¡Œ<br>å¯¿å‘½~1390è¡Œ | æœ€å¤§åŒ–æ¯ä¸ªç›®æ ‡çš„æ•°æ®åˆ©ç”¨ç‡ |
| **union** | å¹¶é›†æ¨¡å¼ï¼šä½¿ç”¨æ‰€æœ‰æ•°æ®ï¼Œç¼ºå¤±å€¼å¡«å…… | ~1667è¡Œ | æ•°æ®é‡å°‘ï¼Œéœ€è¦åˆ©ç”¨æ‰€æœ‰æ ·æœ¬ |

## ä½¿ç”¨æ–¹æ³•

### 1. äº¤é›†æ¨¡å¼ï¼ˆæœ€ä¸¥æ ¼ï¼‰
åªä½¿ç”¨æ‰€æœ‰ç›®æ ‡éƒ½æœ‰å®Œæ•´æ•°æ®çš„æ ·æœ¬ï¼š
```bash
python automl.py train \
    config=xgboost_standard \
    data=../data/Database_normalized.csv \
    multi_target=intersection \
    project=MyProject \
    name=exp_intersection
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š å¤šç›®æ ‡ç­–ç•¥: äº¤é›†æ¨¡å¼
   æ‰€æœ‰ç›®æ ‡éƒ½æœ‰å€¼çš„æ•°æ®: 1354 è¡Œ
   æ•°æ®åˆ©ç”¨ç‡: 81.2%

è®­ç»ƒç›®æ ‡: Max_wavelength(nm)
   Max_wavelength(nm) çš„æœ‰æ•ˆæ•°æ®: 1354 è¡Œ (äº¤é›†æ¨¡å¼)

è®­ç»ƒç›®æ ‡: PLQY
   PLQY çš„æœ‰æ•ˆæ•°æ®: 1354 è¡Œ (äº¤é›†æ¨¡å¼)

è®­ç»ƒç›®æ ‡: tau(s*10^-6)
   tau(s*10^-6) çš„æœ‰æ•ˆæ•°æ®: 1354 è¡Œ (äº¤é›†æ¨¡å¼)
```

**ä¼˜ç‚¹ï¼š**
- æ‰€æœ‰æ¨¡å‹ä½¿ç”¨ç›¸åŒçš„è®­ç»ƒæ•°æ®
- ä¾¿äºæ¨¡å‹é—´æ¯”è¾ƒ
- æ•°æ®ä¸€è‡´æ€§å¥½

**ç¼ºç‚¹ï¼š**
- æ•°æ®åˆ©ç”¨ç‡ä½ï¼ˆ~81%ï¼‰
- å¯èƒ½ä¸¢å¤±æœ‰ä»·å€¼çš„æ ·æœ¬

### 2. ç‹¬ç«‹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
æ¯ä¸ªç›®æ ‡ç‹¬ç«‹é€‰æ‹©å…¶æœ‰æ•ˆæ•°æ®ï¼š
```bash
python automl.py train \
    config=xgboost_standard \
    data=../data/Database_normalized.csv \
    multi_target=independent \
    project=MyProject \
    name=exp_independent
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š å¤šç›®æ ‡ç­–ç•¥: ç‹¬ç«‹æ¨¡å¼
   æ¯ä¸ªç›®æ ‡ç‹¬ç«‹ä½¿ç”¨å…¶æœ‰æ•ˆæ•°æ®

è®­ç»ƒç›®æ ‡: Max_wavelength(nm)
   Max_wavelength(nm) çš„æœ‰æ•ˆæ•°æ®: 1666 è¡Œ (è·³è¿‡äº† 1 è¡Œå«ç¼ºå¤±å€¼çš„æ•°æ®)

è®­ç»ƒç›®æ ‡: PLQY
   PLQY çš„æœ‰æ•ˆæ•°æ®: 1562 è¡Œ (è·³è¿‡äº† 105 è¡Œå«ç¼ºå¤±å€¼çš„æ•°æ®)

è®­ç»ƒç›®æ ‡: tau(s*10^-6)
   tau(s*10^-6) çš„æœ‰æ•ˆæ•°æ®: 1390 è¡Œ (è·³è¿‡äº† 277 è¡Œå«ç¼ºå¤±å€¼çš„æ•°æ®)
```

**ä¼˜ç‚¹ï¼š**
- æœ€å¤§åŒ–æ¯ä¸ªç›®æ ‡çš„æ•°æ®åˆ©ç”¨
- æ¯ä¸ªæ¨¡å‹è·å¾—æœ€å¤šçš„è®­ç»ƒæ ·æœ¬
- é€‚åˆç›®æ ‡é—´ç‹¬ç«‹æ€§å¼ºçš„åœºæ™¯

**ç¼ºç‚¹ï¼š**
- ä¸åŒæ¨¡å‹çš„è®­ç»ƒé›†ä¸åŒ
- éš¾ä»¥ç›´æ¥æ¯”è¾ƒæ¨¡å‹æ€§èƒ½

### 3. å¹¶é›†æ¨¡å¼ï¼ˆæœ€å®½æ¾ï¼‰
ä½¿ç”¨æ‰€æœ‰æ•°æ®ï¼Œé…åˆç¼ºå¤±å€¼å¡«å……ç­–ç•¥ï¼š
```bash
python automl.py train \
    config=xgboost_standard \
    data=../data/Database_normalized.csv \
    multi_target=union \
    nan_handling=mean \
    project=MyProject \
    name=exp_union
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š å¤šç›®æ ‡ç­–ç•¥: å¹¶é›†æ¨¡å¼
   ä½¿ç”¨æ‰€æœ‰æ•°æ®ï¼Œç¼ºå¤±å€¼å°†è¢«å¡«å……

è®­ç»ƒç›®æ ‡: Max_wavelength(nm)
   âœ… ä½¿ç”¨å‡å€¼ 589.2323 å¡«å……äº† 1 ä¸ªç¼ºå¤±å€¼
   Max_wavelength(nm) çš„æœ‰æ•ˆæ•°æ®: 1667 è¡Œ (å¹¶é›†æ¨¡å¼)

è®­ç»ƒç›®æ ‡: PLQY
   âœ… ä½¿ç”¨å‡å€¼ 0.2964 å¡«å……äº† 105 ä¸ªç¼ºå¤±å€¼
   PLQY çš„æœ‰æ•ˆæ•°æ®: 1667 è¡Œ (å¹¶é›†æ¨¡å¼)

è®­ç»ƒç›®æ ‡: tau(s*10^-6)
   âœ… ä½¿ç”¨å‡å€¼ 2.3352 å¡«å……äº† 277 ä¸ªç¼ºå¤±å€¼
   tau(s*10^-6) çš„æœ‰æ•ˆæ•°æ®: 1667 è¡Œ (å¹¶é›†æ¨¡å¼)
```

**ä¼˜ç‚¹ï¼š**
- ä½¿ç”¨æ‰€æœ‰å¯ç”¨æ•°æ®
- æ‰€æœ‰æ¨¡å‹è®­ç»ƒé›†å¤§å°ä¸€è‡´
- é€‚åˆæ•°æ®ç¨€ç¼ºåœºæ™¯

**ç¼ºç‚¹ï¼š**
- å¡«å……å€¼å¯èƒ½å¼•å…¥å™ªå£°
- éœ€è¦è°¨æ…é€‰æ‹©å¡«å……ç­–ç•¥

## ç»„åˆä½¿ç”¨

å¯ä»¥åŒæ—¶è®¾ç½®å¤šç›®æ ‡ç­–ç•¥å’Œç¼ºå¤±å€¼å¤„ç†ç­–ç•¥ï¼š

### ç¤ºä¾‹1ï¼šäº¤é›†æ¨¡å¼ + è·³è¿‡ç¼ºå¤±å€¼
```bash
python automl.py train \
    multi_target=intersection \
    nan_handling=skip
```
æœ€ä¸¥æ ¼çš„è®¾ç½®ï¼Œåªä½¿ç”¨å®Œæ•´æ•°æ®ã€‚

### ç¤ºä¾‹2ï¼šç‹¬ç«‹æ¨¡å¼ + ä¸­ä½æ•°å¡«å……
```bash
python automl.py train \
    multi_target=independent \
    nan_handling=median
```
æ¯ä¸ªç›®æ ‡ç‹¬ç«‹å¤„ç†ï¼Œä½¿ç”¨ä¸­ä½æ•°å¡«å……å„è‡ªçš„ç¼ºå¤±å€¼ã€‚

### ç¤ºä¾‹3ï¼šå¹¶é›†æ¨¡å¼ + å‡å€¼å¡«å……
```bash
python automl.py train \
    multi_target=union \
    nan_handling=mean
```
ä½¿ç”¨æ‰€æœ‰æ•°æ®ï¼Œç”¨å‡å€¼å¡«å……ç¼ºå¤±å€¼ã€‚

## é…ç½®æ–‡ä»¶è®¾ç½®

åœ¨YAMLé…ç½®æ–‡ä»¶ä¸­ï¼š
```yaml
data:
  data_path: ../data/Database_normalized.csv
  multi_target_strategy: intersection  # æˆ– independent, union
  nan_handling: skip  # æˆ– mean, median, zero
  target_columns:
    - Max_wavelength(nm)
    - PLQY
    - tau(s*10^-6)
```

## é€‰æ‹©å»ºè®®

1. **æ•°æ®è´¨é‡é«˜ï¼Œç¼ºå¤±å€¼å°‘ï¼ˆ<5%ï¼‰**
   - ä½¿ç”¨ `multi_target=intersection` + `nan_handling=skip`
   - ç¡®ä¿æ•°æ®ä¸€è‡´æ€§

2. **ç¼ºå¤±å€¼åˆ†å¸ƒä¸å‡ï¼ˆ5-20%ï¼‰**
   - ä½¿ç”¨ `multi_target=independent` + `nan_handling=skip`ï¼ˆé»˜è®¤ï¼‰
   - æœ€å¤§åŒ–æ¯ä¸ªç›®æ ‡çš„æ•°æ®åˆ©ç”¨

3. **æ•°æ®ç¨€ç¼ºï¼Œéœ€è¦æ‰€æœ‰æ ·æœ¬**
   - ä½¿ç”¨ `multi_target=union` + `nan_handling=mean/median`
   - å……åˆ†åˆ©ç”¨æ‰€æœ‰æ•°æ®

4. **ç§‘ç ”å¯¹æ¯”å®éªŒ**
   - ä½¿ç”¨ `multi_target=intersection`
   - ç¡®ä¿æ‰€æœ‰æ¨¡å‹ä½¿ç”¨ç›¸åŒæ•°æ®é›†

## æ•°æ®ç»Ÿè®¡

åŸºäºå½“å‰æ•°æ®é›†ï¼ˆ1667æ¡åŸå§‹æ•°æ®ï¼‰ï¼š

| ç›®æ ‡ | æœ‰æ•ˆæ•°æ® | ç¼ºå¤±æ•°æ® | ç¼ºå¤±ç‡ |
|------|----------|----------|--------|
| Max_wavelength(nm) | 1666 | 1 | 0.06% |
| PLQY | 1562 | 105 | 6.30% |
| tau(s*10^-6) | 1390 | 277 | 16.62% |
| **äº¤é›†ï¼ˆæ‰€æœ‰ç›®æ ‡éƒ½æœ‰å€¼ï¼‰** | **1354** | **313** | **18.78%** |

## æ³¨æ„äº‹é¡¹

1. **SMILESåˆ—ç¼ºå¤±**ï¼šæ— è®ºå“ªç§ç­–ç•¥ï¼ŒSMILESç¼ºå¤±çš„æ ·æœ¬éƒ½ä¼šè¢«è·³è¿‡
2. **ç­–ç•¥ä¼˜å…ˆçº§**ï¼šå¤šç›®æ ‡ç­–ç•¥ä¼˜å…ˆäºç¼ºå¤±å€¼å¤„ç†ç­–ç•¥
3. **æ€§èƒ½å½±å“**ï¼š
   - äº¤é›†æ¨¡å¼ï¼šè®­ç»ƒé€Ÿåº¦å¿«ï¼Œä½†å¯èƒ½æ¬ æ‹Ÿåˆ
   - ç‹¬ç«‹æ¨¡å¼ï¼šå¹³è¡¡æ€§èƒ½å’Œæ•°æ®åˆ©ç”¨
   - å¹¶é›†æ¨¡å¼ï¼šè®­ç»ƒæ—¶é—´é•¿ï¼Œå¯èƒ½è¿‡æ‹Ÿåˆå¡«å……å€¼
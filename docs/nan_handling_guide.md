# ç¼ºå¤±å€¼å¤„ç†æŒ‡å—

## æ¦‚è¿°
ç³»ç»Ÿæ”¯æŒå¤šç§ç¼ºå¤±å€¼ï¼ˆNaNï¼‰å¤„ç†ç­–ç•¥ï¼Œå¯ä»¥é€šè¿‡`nan_handling`å‚æ•°çµæ´»é€‰æ‹©ã€‚

## ä½¿ç”¨æ–¹æ³•

### å‘½ä»¤è¡Œå‚æ•°
```bash
python automl.py train config=xgboost_standard \
    data=../data/Database_normalized.csv \
    nan_handling=mean \  # è®¾ç½®ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥
    project=MyProject \
    name=experiment_001
```

### æ”¯æŒçš„ç­–ç•¥

| ç­–ç•¥ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `skip` | è·³è¿‡å«NaNçš„è¡Œï¼ˆé»˜è®¤ï¼‰ | æ•°æ®è´¨é‡é«˜ï¼Œç¼ºå¤±å€¼è¾ƒå°‘ |
| `mean` | ä½¿ç”¨å‡å€¼å¡«å…… | æ•°å€¼å‹æ•°æ®ï¼Œæ­£æ€åˆ†å¸ƒ |
| `median` | ä½¿ç”¨ä¸­ä½æ•°å¡«å…… | æ•°å€¼å‹æ•°æ®ï¼Œå­˜åœ¨å¼‚å¸¸å€¼ |
| `zero` | ä½¿ç”¨0å¡«å…… | ç¼ºå¤±è¡¨ç¤º"æ— "æˆ–"é›¶" |
| `forward` | å‰å‘å¡«å…… | æ—¶åºæ•°æ® |
| `interpolate` | æ’å€¼å¡«å…… | è¿ç»­æ•°æ® |

## ä½¿ç”¨ç¤ºä¾‹

### 1. è·³è¿‡ç¼ºå¤±å€¼ï¼ˆé»˜è®¤ï¼‰
```bash
python automl.py train config=xgboost_standard \
    data=data.csv \
    nan_handling=skip
```
è¾“å‡ºï¼š
```
Max_wavelength(nm) çš„æœ‰æ•ˆæ•°æ®: 1666 è¡Œ (è·³è¿‡äº† 1 è¡Œå«ç¼ºå¤±å€¼çš„æ•°æ®)
PLQY çš„æœ‰æ•ˆæ•°æ®: 1562 è¡Œ (è·³è¿‡äº† 105 è¡Œå«ç¼ºå¤±å€¼çš„æ•°æ®)
```

### 2. å‡å€¼å¡«å……
```bash
python automl.py train config=xgboost_standard \
    data=data.csv \
    nan_handling=mean
```
è¾“å‡ºï¼š
```
âœ… ä½¿ç”¨å‡å€¼ 589.2323 å¡«å……äº† 1 ä¸ªç›®æ ‡ç¼ºå¤±å€¼
Max_wavelength(nm) çš„æœ‰æ•ˆæ•°æ®: 1667 è¡Œ
```

### 3. ä¸­ä½æ•°å¡«å……
```bash
python automl.py train config=xgboost_standard \
    data=data.csv \
    nan_handling=median
```
è¾“å‡ºï¼š
```
âœ… ä½¿ç”¨ä¸­ä½æ•° 588.0000 å¡«å……äº† 1 ä¸ªç›®æ ‡ç¼ºå¤±å€¼
Max_wavelength(nm) çš„æœ‰æ•ˆæ•°æ®: 1667 è¡Œ
```

## é…ç½®æ–‡ä»¶è®¾ç½®

åœ¨YAMLé…ç½®æ–‡ä»¶ä¸­ï¼š
```yaml
data:
  data_path: ../data/Database_normalized.csv
  nan_handling: mean
  nan_threshold: 0.5  # å¯é€‰ï¼šç¼ºå¤±å€¼æ¯”ä¾‹é˜ˆå€¼
  feature_nan_strategy: zero  # ç‰¹å¾ç¼ºå¤±å€¼ç­–ç•¥
  target_nan_strategy: skip   # ç›®æ ‡ç¼ºå¤±å€¼ç­–ç•¥
```

## æ³¨æ„äº‹é¡¹

1. **SMILESåˆ—**ï¼šåˆ†å­SMILESå­—ç¬¦ä¸²ç¼ºå¤±æ—¶æ€»æ˜¯ä¼šè·³è¿‡è¯¥è¡Œï¼Œå› ä¸ºæ— æ³•å¡«å……åŒ–å­¦ç»“æ„
2. **ç›®æ ‡åˆ—ä¼˜å…ˆçº§**ï¼šæ¯ä¸ªç›®æ ‡åˆ—çš„ç¼ºå¤±å€¼ç‹¬ç«‹å¤„ç†
3. **æ€§èƒ½å½±å“**ï¼š
   - `skip`ï¼šå‡å°‘è®­ç»ƒæ•°æ®é‡ï¼Œä½†ä¿è¯æ•°æ®è´¨é‡
   - å¡«å……ç­–ç•¥ï¼šä¿ç•™æ›´å¤šæ•°æ®ï¼Œä½†å¯èƒ½å¼•å…¥å™ªå£°
4. **ç­–ç•¥é€‰æ‹©å»ºè®®**ï¼š
   - ç¼ºå¤±å€¼<5%ï¼šä½¿ç”¨`skip`
   - ç¼ºå¤±å€¼5-20%ï¼šè€ƒè™‘`mean`æˆ–`median`
   - ç¼ºå¤±å€¼>20%ï¼šéœ€è¦ä»”ç»†åˆ†æç¼ºå¤±åŸå› 

## åœ¨é…ç½®æ˜¾ç¤ºä¸­æŸ¥çœ‹

è®­ç»ƒå¼€å§‹æ—¶ä¼šæ˜¾ç¤ºç¼ºå¤±å€¼å¤„ç†é…ç½®ï¼š
```
ğŸ“‹ é…ç½®ä¿¡æ¯ (Configuration)
============================================================

ğŸ—‚ï¸  æ•°æ®é…ç½® (Data):
   è®­ç»ƒæ•°æ®: ../data/Database_normalized.csv
   ç›®æ ‡åˆ—: ['Max_wavelength(nm)', 'PLQY', 'tau(s*10^-6)']
   ç¼ºå¤±å€¼å¤„ç†: mean
     - ç‰¹å¾NaNç­–ç•¥: zero
     - ç›®æ ‡NaNç­–ç•¥: skip
```

## é«˜çº§é…ç½®

å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®æ›´è¯¦ç»†çš„ç­–ç•¥ï¼š
- `nan_threshold`: å½“æŸè¡Œç¼ºå¤±å€¼æ¯”ä¾‹è¶…è¿‡æ­¤é˜ˆå€¼æ—¶è·³è¿‡ï¼ˆé»˜è®¤0.5ï¼‰
- `feature_nan_strategy`: ç‰¹å¾ç¼ºå¤±å€¼å¤„ç†ç­–ç•¥
- `target_nan_strategy`: ç›®æ ‡å€¼ç¼ºå¤±å¤„ç†ç­–ç•¥

è¿™äº›å‚æ•°å…è®¸å¯¹ç‰¹å¾å’Œç›®æ ‡åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å¤„ç†ç­–ç•¥ã€‚